<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mis escuchas – Spotify vs YouTube Music</title>
  <meta name="description" content="Dashboard con mis estadísticas de escuchas: Spotify vs YouTube Music, top 10 de canciones y más." />
  <meta name="theme-color" content="#0b0c10" />
  <style>
    :root{
      --bg:#0b0c10;        /* fondo */
      --card:#111218;      /* tarjetas */
      --text:#e6e7eb;
      --muted:#a1a6b3;
      --brand:#4f8cff;     /* acento */
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.25);
      --chart-pad:18px;    /* grosor del borde blanco alrededor de los embeds */
    }
    html,body{margin:0;height:100%;}
    body{
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;
      background:linear-gradient(180deg,#0a0b0e 0%,#0b0c10 40%,#0b0c10 100%);
      color:var(--text);
    }
    .wrap{max-width:1100px;margin:auto;padding:28px 18px 60px;}
    header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin:8px 0 22px;}
    .title{font-weight:800;letter-spacing:.2px;font-size:clamp(22px,2.2vw,32px);}
    .subtitle{color:var(--muted);font-size:14px;margin-top:4px}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:18px}
    /* NUEVO: forzar 1 columna (ancho completo) cuando lo pidamos */
    .cards-1col{grid-template-columns:1fr;}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px 16px 8px;}
    .card h3{margin:.2rem 0 10px;font-size:18px}
    .card p{margin:0 0 8px;color:var(--muted);font-size:13px}

    /* Marco blanco para imágenes (SVG/PNG) */
    .frame{
      background:#fff;
      border-radius:16px;
      overflow:hidden;
    }
    .frame img{display:block;width:100%;height:auto}

    /* Marco blanco con padding para iframes/embeds (Datawrapper / Flourish / Tableau) */
    .frame-padded{
      background:#fff;
      border-radius:16px;
      padding:var(--chart-pad);
      border:1px solid #e9eaee;
      box-shadow:0 12px 32px rgba(0,0,0,.28);
      overflow:hidden;
    }
    .frame-padded iframe,
    .frame-padded .flourish-embed,
    .frame-padded .tableauPlaceholder,
    .frame-padded object{display:block;width:100%;border:0;}

    .byline{margin-top:24px;color:var(--muted);font-size:12px}
    .tag{display:inline-block;background:#1a1d27;color:#b4c6ff;border:1px solid #27304d;padding:3px 8px;border-radius:999px;font-size:12px}
    .nav{display:flex;gap:8px;flex-wrap:wrap}
    .nav a{color:#cfe0ff;text-decoration:none;background:#13233a;border:1px solid #21406e;padding:8px 12px;border-radius:999px;font-size:13px}
    .nav a:hover{background:#173459}
    footer{opacity:.7;margin-top:30px;border-top:1px dashed #283045;padding-top:12px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">Mis escuchas: Spotify vs YouTube Music</div>
        <div class="subtitle">Dashboard estático y dinámico publicado en GitHub Pages. Datos descargados de Spotify y Google.</div>
      </div>
      <nav class="nav">
        <a href="#totales">Totales</a>
        <a href="#tops">Top 10</a>
        <a href="#cuando">¿Cuándo escucho?</a>
        <a href="#ranking">Ranking</a>
      </nav>
    </header>

    <!-- Totales (Datawrapper) -->
    <section id="totales" class="cards cards-1col">
      <article class="card">
        <h3>¿Donde escucho más música?</h3>
        <p>Comparación total de reproducciones acumuladas entre Spotify y YouTube Music. (Hecho con Datawrapper)</p>
        <div class="frame-padded">
          <iframe title="¿Dónde escucho más música?" aria-label="Bar Chart"
            id="datawrapper-chart-cVDWG"
            src="https://datawrapper.dwcdn.net/cVDWG/1/"
            scrolling="no" frameborder="0"
            style="width:0; min-width:100% !important; border:0;"
            height="400"></iframe>
        </div>
      </article>
    </section>

    <!-- Top 10 (RAWGraphs)  -->
    <section id="tops" class="cards cards-1col" style="margin-top:14px">
      <article class="card">
        <h3>¿Cuáles son mis canciones más reproducidas?</h3>
        <p>Top 10 canciones por reproducciones. (Hecho con RAWGraphs)</p>
        <div class="frame">
          <img src="max_plays.svg" alt="Top 10 por reproducciones" />
        </div>
      </article>
      <article class="card">
        <h3>¿Cuáles son las canciones que realmente más escuche?</h3>
        <p>Top 10 canciones por tiempo escuchado. (Hecho con RAWGraphs)</p>
        <div class="frame">
          <img src="max_mins.svg" alt="Top 10 por tiempo" />
        </div>
      </article>
    </section>

    <!-- ¿Cuándo escucho? (Tableau) -->
    <section id="cuando" class="cards cards-1col" style="margin-top:14px">
      <article class="card">
        <h3>¿En qué días y a qué horas escucho más música?</h3>
        <p>Mapa de calor por día de la semana y hora. (Hecho con Tableau)</p>

        <div class="frame-padded">
          <div class='tableauPlaceholder' id='viz1758515888424' style='position: relative'>
            <noscript>
              <a href='#'>
                <img alt='¿En qué días y a qué horas escucho más música? Mapa de calor por día de la semana y hora.'
                     src='https://public.tableau.com/static/images/ho/horasdeldiadelasemana/Sheet1/1_rss.png'
                     style='border: none' />
              </a>
            </noscript>
            <object class='tableauViz' style='display:none;'>
              <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
              <param name='embed_code_version' value='3' />
              <param name='site_root' value='' />
              <param name='name' value='horasdeldiadelasemana/Sheet1' />
              <param name='tabs' value='no' />
              <param name='toolbar' value='no' />
              <param name='display_count' value='no' />
              <param name='static_image' value='https://public.tableau.com/static/images/ho/horasdeldiadelasemana/Sheet1/1.png' />
              <param name='animate_transition' value='yes' />
              <param name='display_static_image' value='yes' />
              <param name='display_spinner' value='yes' />
              <param name='display_overlay' value='yes' />
              <param name='language' value='es-ES' />
              <param name='filter' value='publish=yes' />
            </object>
          </div>
          <script type='text/javascript'>
            (function(){
              var divElement = document.getElementById('viz1758515888424');
              var vizElement = divElement.getElementsByTagName('object')[0];
              function setVizHeight(){
                var w = divElement.offsetWidth;
                /* ratios distintos por tamaño, para eliminar el espacio blanco sobrante */
                var ratio = 0.42;          // desktop
                if (w < 900) ratio = 0.58;  // tablets
                if (w < 600) ratio = 0.82;  // móviles
                vizElement.style.width = '100%';
                vizElement.style.height = (w * ratio) + 'px';
              }
              setVizHeight();
              var scriptElement = document.createElement('script');
              scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
              vizElement.parentNode.insertBefore(scriptElement, vizElement);
              window.addEventListener('resize', setVizHeight);
              window.addEventListener('orientationchange', setVizHeight);
            })();
          </script>
        </div>
      </article>
    </section>

    <!-- Ranking (Flourish) -->
    <section id="ranking" class="cards cards-1col" style="margin-top:14px">
      <article class="card">
        <h3>¿Quién fue semana a semana mi artista más escuchado?</h3>
        <p></p>
        <div class="frame-padded">
          <div class="flourish-embed flourish-bar-chart-race" data-src="visualisation/24824827">
            <script src="https://public.flourish.studio/resources/embed.js"></script>
            <noscript>
              <img src="https://public.flourish.studio/visualisation/24824827/thumbnail" width="100%" alt="bar-chart-race visualization" />
            </noscript>
          </div>
        </div>
      </article>
    </section>

    <p class="byline">
      <span class="tag">Datos personales</span> · Generado con Datawrapper, Flourish, RAWGraphs &amp; Tableau ·
      Paleta: Okabe &amp; Ito · Código: GitHub Pages
    </p>

    <footer>
      Facundo Lasserre, 62165
    </footer>
  </div>

  <!-- Auto-resize oficial para Datawrapper (una sola vez) -->
  <script>
    window.addEventListener("message", (event) => {
      if (event.data["datawrapper-height"]) {
        const iframes = document.querySelectorAll("iframe");
        for (const id in event.data["datawrapper-height"]) {
          for (let i = 0; i < iframes.length; i++) {
            if (iframes[i].contentWindow === event.source) {
              iframes[i].style.height = event.data["datawrapper-height"][id] + "px";
            }
          }
        }
      }
    });
    const y = document.getElementById('y'); if (y) y.textContent = new Date().getFullYear();
  </script>
</body>
</html>
